<!DOCTYPE html>
<html lang="en">

<head>

<!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-8Q3J2PK5YY"></script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-146370111-2"></script>
    <script>
        window.dataLayer = window.dataLayer || []; 
        function gtag(){dataLayer.push(arguments);} 
        gtag("js", new Date()); 
        gtag("config", "G-8Q3J2PK5YY"); 
        gtag("config", 'UA-146370111-2');
    </script>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <meta name="description" contents="S.L.O.O.T.H.E.S: Social, Low-poly, Object3D, OpenGL, THREEjs, Î—ybrid, E-commerce, Site">
    <!-- "3D social world, avatar, outfit, animator, poser, google search 3D, threejs, editors, and more..." -->
    <meta name="p:domain_verify" content="340d1e045a42154ae842ad0fc7ea1856"/>
    <meta name="p:domain_verify" content="c6eca3f46d3b30145f6d12b44a01ddee"/>

    <title>sloothes</title>

    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/bootbox-dialoges.css">
    <link rel="stylesheet" href="/css/side-panels.css">
    <link rel="stylesheet" href="/css/messg.css" >
    <link rel="stylesheet" href="/css/spectrum.css">
    <link rel="stylesheet" href="/css/colorpicker.css">
    <link rel="stylesheet" href="/css/spinner.css">
    <link rel="stylesheet" href="/css/jquery-ui.css">
    <link rel="stylesheet" href="/css/alerts.css">
    <link rel="stylesheet" href="/css/panel-ui.css">
    <link rel="stylesheet" href="/css/anywhere3d.css">
    <link rel="stylesheet" href="/css/jquery.Jcrop.css">
    <link rel="stylesheet" href="/css/menu-menubar.css">
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/style.css">

    <script>var debugMode = true;</script>
    <script src="/service-worker/sw.js"></script>
    <script src="/js/w3.js"></script> 
    <script src="/js/store2.js"></script>
    <script src="/js/loadjs.min.js"></script>
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/bootbox.min.js"></script>
    <script src="/js/DeviceDetector.js"></script>

</head>

<body>

<style>

    #content div ul li {
        cursor: pointer;
        margin-left:15px;
    }

    #right-side-content {
        position:absolute; left:25px; top:60px; right:10px; bottom:40px; 
        padding: 0px 20px 0px 20px; overflow:auto; 
    }

    a.none-deco:focus,
    a.none-deco:hover, 
    a.none-deco:active, 
    a.none-deco:visited {
        color:#55a5ec;
        text-decoration:none;
    }

</style>

<div id="panel" class="collapsed">
    <h1><a href="/home" class="none-deco">Sloothes</a></h1>

    <a id="expandButton" href="#">
        <span></span>
        <span></span>
        <span></span>
    </a>
    <div class="filterBlock" >
        <input type="text" id="filterInput" placeholder="Type to filter"/>
        <a href="#" id="clearFilterButton" >x</a>
    </div>

    <div id="content">

        <div id="social" style="margin:10px 20px 0px;width:fit-content;">
            <a href="//www.facebook.com/anywhere3d" target="_blank">Facebook, </a>
            <a href="//twitter.com/anywhere3d" target="_blank">Twitter, </a>
        </div>

        <div id="google-search" style="margin:10px 20px 0px;width:fit-content;">
            <a href="/home">Avatar Editor</a><br>
            <a href="/google-search" target="_blank">Google Search 3D</a>
        </div>


    </div>

</div>

<section class="mbr-section" id="body-section">

    <iframe id="viewer" src="/tradecenter"></iframe>

</section>

<script>
(function(){

    var list = {

        "Sections": {

            "Everyone": [
                ["Select outfit", "/outfits"],
            //  ["Google Search", "/google-search"],
            ],

            "Members": [
            //  ["Home", "/home"],
                ["Login", "/login"],
                ["SignUp", "/signup"],
                ["My products", "/products-catalog"],
            ],

            "Galleries": [
                ["Gallery", "/gallery"],
                ["Snapshots", "/snapshots"],
            ],

            "Showcase": [
                ["Avatar", "/demo"],  // demo scene.
                ["Pegmen", "/demo/crowd"],
                ["Female (RLC)", "demo/female"],
                ["Elevators", "/elevators"],
            //  ["Boilerplate", "/boilerplate"],
                ["Tropical Island", "/demo/tropicalisland"],
                ["Welcome Center", "/demo/tradecenter"],
                ["MannyTheSkeleton", "/demo/mannytheskeleton"],
            ],

            "Viewers": [
                ["3D Online", "/3DViewer/website"],
                ["OBJ Viewer", "/OBJViewer"],
                ["FBX Viewer", "/FBXViewer"],
            ],

            "Editors": [
                ["Animator", "/animator"],
                ["Photopea", "//www.photopea.com"],
                ["HTML Editor", "/htmlEditor"],
                ["HTML Minifier", "/html-minifier"],
                ["JSON Editor", "//jsoneditoronline.org"],
                ["JSON Formatter", "//jsonformatter.org"],
                ["Threejs EditorPlus", "/three/r78/editor"],
                ["Javascript Minifier", "//javascript-minifier.com"],
            //  ["NunuStudio Editor", "/nunuStudio/editor"],
                ["Threejs Docs (r78)", "/three/r78/docs"],
            ],

            "Social": [
                ["Blog", "/blog"],
                ["About", "/about"],
                ["Forum", "/forum"],
            ],

        /*
            "Games": [
                ["PingPong", "//oos.moxiecode.com/js_webgl/ping_pong/"],
            ],

            "Some fun...": [
                ["Ping Pong", "//oos.moxiecode.com/js_webgl/ping_pong"],
                ["flamingo", "//threejsfundamentals.org/threejs/background.html"],
            ],
        */

        },


        "Marketplace": {

            "Clothes": [
                ["Skin", "/products-catalog"],
                ["Hair", "/products-catalog"],
                ["Eyes", "/products-catalog"],
                ["Lingerie", "/products-catalog"],
                ["Stockings", "/products-catalog"],
                ["Costume", "/products-catalog"],
                ["Trouser", "/products-catalog"],
                ["Tshirt", "/products-catalog"],
                ["Dress", "/products-catalog"],
                ["Shoes", "/products-catalog"],
            ],

            "Outfits": [
                ["Male", "/products-catalog"],
                ["Female", "/products-catalog"],
            ],

            "Avatars": [
                ["Male", "/products-catalog"],
                ["Female", "/products-catalog"],
                ["Skeleton", "/products-catalog"],
            ],

            "Animations": [
                ["Male", "/products-catalog"],
                ["Female", "/products-catalog"],
                ["Skeleton", "/products-catalog"],
            ],

        },

    };

    var pages = {};

    for ( var section in list ) {
        pages[ section ] = {};
        for ( var category in list[ section ] ) {
            pages[ section ][ category ] = {};
            for ( var i = 0; i < list[ section ][ category ].length; i ++ ) {
                var page = list[ section ][ category ][ i ];
                pages[ section ][ category ][ page[ 0 ] ] = page[ 1 ];
            }
        }
    }


    var panel = document.getElementById( 'panel' );
    var viewer = document.getElementById( 'viewer' );

    var expandButton = document.getElementById( 'expandButton' );
    expandButton.addEventListener( 'click', function ( event ) {
        panel.classList.toggle( 'collapsed' );
        event.preventDefault();
    } );

    var filterInput = document.getElementById( 'filterInput' );
    var clearFilterButton = document.getElementById( 'clearFilterButton' );

    var DELIMITER = '/';
    var MEMBER_DELIMITER = '.';
    var nameCategoryMap = {};
    var sections = [];

    var content = document.getElementById( 'content' );

    for ( var section in list ) {

        var h2 = document.createElement( 'h2' );
        h2.textContent = section;

        content.appendChild( h2 );

        for ( var category in list[ section ] ) {

            var div = document.createElement( 'div' );

            var h3 = document.createElement( 'h3' );
            h3.textContent = category;

            div.appendChild( h3 );

            var ul = document.createElement( 'ul' );
            div.appendChild( ul );

            for ( var i = 0; i < list[ section ][ category ].length; i ++ ) {

                var page = list[ section ][ category ][ i ];

                var li = document.createElement( 'li' );
                var a = document.createElement( 'a' );
            //  a.setAttribute( "href", "#" );

                (function( s, c, p ) {
                    a.addEventListener( "click", function( e ) {
                        debugMode && console.log({
                            "section": s,
                            "category": c,
                            "page": p,
                        });
                        viewer.src = goTo( s, c, p[0] );
                        e.preventDefault();
                    })
                })( section, category, page );

                a.textContent = page[0];
                li.appendChild( a );
                ul.appendChild( li );

                nameCategoryMap[page[0]] = {
                    section: section,
                    category: category,
                    name: page[0],
                    element: a
                };

            }

            content.appendChild( div );
            sections.push( ul );

        }
    }

    panel.appendChild( content )

    function layoutList() {

        sections.forEach( function( el ) {
            var collapsed = true;
            Array.prototype.slice.apply( el.children ).forEach( function( item ) {
                if( !item.classList.contains( 'filtered' ) ) {
                    collapsed = false;
                    return;
                }
            } );
            if( collapsed ) {
                el.parentElement.classList.add( 'filtered' );
            } else {
                el.parentElement.classList.remove( 'filtered' );
            }
        } );
    }

    filterInput.addEventListener( 'input', function( e ) {
        updateFilter();
    } );

    clearFilterButton.addEventListener( 'click', function( e ) {
        filterInput.value = '';
        updateFilter();
        e.preventDefault();
    } );

    function updateFilter() {

        var exp = new RegExp( filterInput.value, 'gi' );
        for( var j in nameCategoryMap ) {
            var res = nameCategoryMap[ j ].name.match( exp );
            if( res && res.length > 0 ) {
                nameCategoryMap[ j ].element.parentElement.classList.remove( 'filtered' );
                var str = nameCategoryMap[ j ].name;
                for( var i = 0; i < res.length; i++ ) {
                    str = str.replace( res[ i ], '<b>' + res[ i ] + '</b>' );
                }
                nameCategoryMap[ j ].element.innerHTML = str;
            } else {
                nameCategoryMap[ j ].element.parentElement.classList.add( 'filtered' );
                nameCategoryMap[ j ].element.textContent = nameCategoryMap[ j ].name;
            }
        }
        layoutList();

    }

    function encodeUrl( path ) {

        return path.replace(/\ \/\ /g, '.').replace(/\ /g, '_');

    }

    function decodeUrl( path ) {

        return path.replace(/_/g, ' ').replace(/\./g, ' / ');

    }

//  Page loading.

    function goTo( section, category, name, member ) {
        var parts, location;

    //  Fully resolve links that only provide a name
        if(arguments.length == 1) {

        //  Resolve links of the form 'Class.member'
            if(section.indexOf(MEMBER_DELIMITER) !== -1) {
                parts = section.split(MEMBER_DELIMITER)
                section = parts[0];
                member = parts[1];
            }

            location = nameCategoryMap[section];
            if (!location) return;
            section = location.section;
            category = location.category;
            name = location.name;
        }

        var url = pages[ section ][ category ][ name ];
        //  window.location.pathname = url;

        panel.classList.add( 'collapsed' );
        
        return url;

    }

    function goToHash() {

        var hash = window.location.hash.substring( 1 ).split(DELIMITER);
        var member = hash[2].split(MEMBER_DELIMITER)
        goTo( decodeUrl(hash[0]), decodeUrl(hash[1]), decodeUrl(member[0]), decodeUrl(member.length > 1 ? member[1] : '') );

    }

    window.addEventListener( 'hashchange', goToHash, false );

    if ( window.location.hash.length > 0 ) goToHash();

})();
</script>

</body>
</html>

